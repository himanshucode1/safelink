<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SafeLink ‚Äì Cybersecurity Quiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', 'Montserrat', Arial, sans-serif;
      background: #131c24;
      color: #eaf6ff;
      min-height: 100vh;
    }
    
    /* NAVBAR */
    .navbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #131c2e;
      padding: 18px 24px;
      position: relative;
      z-index: 100;
    }
    .navbar-logo {
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 101;
    }
    .navbar-logo .icon {
      width: 42px;
      height: 42px;
      background: linear-gradient(135deg,#08cff6,#1376ff);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5em;
    }
    .navbar-logo-text { line-height: 1.2; }
    .navbar-logo-title {
      font-weight: bold;
      font-size: 1.18em;
      color: #fff;
      letter-spacing: .03em;
    }
    .navbar-logo-sub {
      color: #27defc;
      font-size: .92em;
    }
    .navbar-links {
      display: flex;
      align-items: center;
      gap: 32px;
    }
    .navbar-links a {
      color: #b0eaff;
      text-decoration: none;
      font-size: 1em;
      font-weight: 500;
      padding: 8px 16px;
      border-radius: 7px;
      transition: background .19s, color .18s;
    }
    .navbar-links a:hover, .navbar-links .active {
      background: #1084ff44;
      color: #53d6ff;
    }
    .navbar-auth { margin-left: 24px; }
    .navbar-auth button {
      padding: 10px 20px;
      border-radius: 20px;
      background: #19baff;
      color: #fff;
      border: none;
      font-weight: 700;
      font-size: 1em;
      cursor: pointer;
      transition: background .2s;
    }
    .navbar-auth button:hover {
      background: #53d6ff;
      color: #121b25;
    }
    .hamburger {
      display: none;
      background: none;
      border: none;
      font-size: 2em;
      color: #53d6ff;
      cursor: pointer;
      z-index: 101;
    }
    .close-btn {
      display: none;
      position: absolute;
      top: 22px;
      right: 18px;
      font-size: 2.5em;
      background: none;
      color: #53d6ff;
      border: none;
      cursor: pointer;
      z-index: 102;
      line-height: 1;
    }

    /* AUTH MODAL */
    .auth-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    .auth-overlay.active {
      display: flex;
    }
    .auth-box {
      background: linear-gradient(135deg, #1a2540, #0a0e1a);
      border-radius: 20px;
      padding: 40px;
      max-width: 440px;
      width: 90%;
      box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
      position: relative;
    }
    .auth-box h2 {
      color: #54c7ea;
      margin-bottom: 24px;
      font-size: 2em;
      text-align: center;
    }
    .auth-box input {
      width: 100%;
      padding: 14px 18px;
      margin-bottom: 16px;
      border-radius: 10px;
      border: 2px solid rgba(25, 186, 255, 0.3);
      background: rgba(25, 186, 255, 0.1);
      color: #fff;
      font-size: 1em;
      transition: border .3s;
    }
    .auth-box input:focus {
      outline: none;
      border-color: #19baff;
    }
    .auth-box input::placeholder {
      color: #8ea8c3;
    }
    .auth-box button {
      width: 100%;
      padding: 14px;
      border-radius: 10px;
      border: none;
      background: #19baff;
      color: #fff;
      font-size: 1.1em;
      font-weight: 700;
      cursor: pointer;
      transition: all .3s;
      margin-top: 10px;
    }
    .auth-box button:hover {
      background: #53d6ff;
      transform: translateY(-2px);
    }
    .auth-links {
      text-align: center;
      margin-top: 20px;
      font-size: 0.95em;
    }
    .auth-links a {
      color: #19baff;
      cursor: pointer;
      text-decoration: none;
      transition: color .2s;
    }
    .auth-links a:hover {
      color: #53d6ff;
      text-decoration: underline;
    }
    .auth-divider {
      text-align: center;
      color: #8ea8c3;
      margin: 16px 0 8px 0;
    }
    .error-msg {
      background: rgba(239, 68, 68, 0.2);
      border: 1px solid #ef4444;
      color: #fca5a5;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 16px;
      font-size: 0.9em;
      display: none;
    }
    .success-msg {
      background: rgba(16, 185, 129, 0.2);
      border: 1px solid #10b981;
      color: #6ee7b7;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 16px;
      font-size: 0.9em;
      display: none;
    }
    .form-section {
      display: none;
    }
    .form-section.active {
      display: block;
    }

    /* QUIZ HERO */
    .quiz-hero {
      background: linear-gradient(135deg, #0a0e1a 0%, #1a2540 50%, #2d3a70 100%);
      padding: 60px 20px;
      text-align: center;
    }
    .quiz-hero h1 {
      font-size: 3em;
      background: linear-gradient(90deg, #54c7ea, #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 700;
      margin-bottom: 16px;
    }
    .quiz-hero p {
      font-size: 1.2em;
      color: #c0d5e8;
      max-width: 700px;
      margin: 0 auto;
    }

    /* QUIZ CONTAINER */
    .quiz-container {
      max-width: 900px;
      margin: 40px auto 80px;
      padding: 0 20px;
    }
    .quiz-card {
      background: linear-gradient(135deg, rgba(30, 45, 80, 0.6), rgba(20, 30, 55, 0.8));
      border-radius: 20px;
      padding: 40px;
      display: none;
    }
    .quiz-card.active { display: block; }
    
    .question-number {
      color: #19baff;
      font-size: 1.1em;
      margin-bottom: 20px;
      font-weight: 600;
    }
    .question-text {
      font-size: 1.6em;
      color: #fff;
      margin-bottom: 32px;
      line-height: 1.4;
    }
    .options {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 32px;
    }
    .option {
      background: rgba(25, 186, 255, 0.1);
      border: 2px solid rgba(25, 186, 255, 0.3);
      border-radius: 12px;
      padding: 20px 24px;
      color: #c0d5e8;
      font-size: 1.15em;
      cursor: pointer;
      transition: all .3s;
      text-align: left;
    }
    .option:hover {
      background: rgba(25, 186, 255, 0.2);
      border-color: #19baff;
      transform: translateX(8px);
    }
    .option.selected {
      background: rgba(25, 186, 255, 0.3);
      border-color: #19baff;
      color: #fff;
      font-weight: 600;
    }

    .quiz-buttons {
      display: flex;
      gap: 16px;
      justify-content: space-between;
    }
    .quiz-btn {
      padding: 15px 36px;
      border-radius: 12px;
      border: none;
      font-size: 1.15em;
      font-weight: 600;
      cursor: pointer;
      transition: all .3s;
    }
    .quiz-btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    .btn-next {
      background: #19baff;
      color: #fff;
    }
    .btn-next:hover:not(:disabled) {
      background: #53d6ff;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(25, 186, 255, 0.4);
    }
    .btn-prev {
      background: rgba(25, 186, 255, 0.2);
      color: #19baff;
    }
    .btn-prev:hover:not(:disabled) {
      background: rgba(25, 186, 255, 0.3);
    }

    /* RESULT CARD */
    .result-card {
      background: linear-gradient(135deg, #1084ff, #19c5ff);
      border-radius: 20px;
      padding: 60px 40px;
      text-align: center;
      display: none;
    }
    .result-card.active { display: block; }
    .result-card h2 {
      font-size: 2.5em;
      color: #fff;
      margin-bottom: 24px;
    }
    .score-display {
      font-size: 5em;
      color: #fff;
      font-weight: 700;
      margin-bottom: 24px;
    }
    .result-card p {
      font-size: 1.3em;
      color: #e0f2ff;
      margin-bottom: 36px;
      line-height: 1.5;
    }
    .result-buttons {
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .result-card button {
      padding: 16px 40px;
      background: #fff;
      color: #1376ff;
      border: none;
      border-radius: 12px;
      font-size: 1.15em;
      font-weight: 700;
      cursor: pointer;
      transition: all .3s;
    }
    .result-card button:hover {
      background: #f0f9ff;
      transform: translateY(-3px);
      box-shadow: 0 8px 24px rgba(255, 255, 255, 0.3);
    }

    /* RESPONSIVE */
    @media (max-width: 900px) {
      .hamburger { display: block; }
      .navbar-links {
        flex-direction: column;
        position: fixed;
        top: 0; right: 0;
        width: 75vw;
        max-width: 350px;
        height: 100vh;
        background: linear-gradient(120deg,#131c2e 60%,#0b1321 100%);
        box-shadow: -10px 0 40px #0008;
        padding: 80px 20px 30px;
        z-index: 99;
        gap: 0;
        transform: translateX(100%);
        opacity: 0;
        pointer-events: none;
        transition: transform .4s cubic-bezier(.39,.58,.57,1.14), opacity 0.3s;
      }
      .navbar-links.open {
        transform: translateX(0);
        opacity: 1;
        pointer-events: auto;
      }
      .navbar-links a {
        width: 100%;
        padding: 14px 16px;
        border-radius: 8px;
        margin-bottom: 8px;
      }
      .navbar-auth {
        margin-left: 0;
        margin-top: 20px;
        width: 100%;
      }
      .navbar-auth button { width: 100%; }
      .close-btn { display: block; }
      .quiz-hero h1 { font-size: 2em; }
      .quiz-card { padding: 24px; }
      .question-text { font-size: 1.3em; }
      .option { font-size: 1em; padding: 16px 20px; }
      .quiz-buttons { flex-direction: column; }
      .result-buttons { flex-direction: column; }
      .auth-box { padding: 30px 24px; }
    }
    @media (max-width: 600px) {
      .navbar-logo-title { font-size: 1em; }
      .navbar-logo .icon { width: 36px; height: 36px; font-size: 1.3em; }
      .score-display { font-size: 3.5em; }
    }
  </style>
</head>
<body>
    <!-- AUTH OVERLAY -->
  <div class="auth-overlay" id="authOverlay">
    <div class="auth-box">
      <div id="errorMsg" class="error-msg"></div>
      <div id="successMsg" class="success-msg"></div>

      <!-- LOGIN FORM -->
      <div id="loginForm" class="form-section active">
        <h2>üîê Login</h2>
        <input type="text" id="loginUsername" placeholder="Username" />
        <input type="password" id="loginPassword" placeholder="Password" />
        <button onclick="handleLogin()">Login</button>
        <div class="auth-divider">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</div>
        <div class="auth-links">
          Don't have an account?<a onclick="showSignup()"> Sign Up</a><br>
          <a onclick="showForgotPassword()" style="margin-top: 8px; display: inline-block;">Forgot Password?</a>
        </div>
      </div>

      <!-- SIGNUP FORM -->
      <div id="signupForm" class="form-section">
        <h2>üìù Sign Up</h2>
        <input type="text" id="signupUsername" placeholder="Username" />
        <input type="email" id="signupEmail" placeholder="Email" />
        <input type="password" id="signupPassword" placeholder="Password" />
        <input type="password" id="signupConfirmPassword" placeholder="Confirm Password" />
        <button onclick="handleSignup()">Create Account</button>
        <div class="auth-divider">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</div>
        <div class="auth-links">
          <a onclick="showLogin()">Already have an account? Login</a>
        </div>
      </div>

      <!-- FORGOT PASSWORD FORM -->
      <div id="forgotForm" class="form-section">
        <h2>üîë Reset Password</h2>
        <input type="text" id="forgotUsername" placeholder="Enter your username" />
        <input type="email" id="forgotEmail" placeholder="Enter your email" />
        <input type="password" id="newPassword" placeholder="New Password" />
        <input type="password" id="confirmNewPassword" placeholder="Confirm New Password" />
        <button onclick="handleForgotPassword()">Reset Password</button>
        <div class="auth-divider">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</div>
        <div class="auth-links">
          <a onclick="showLogin()">‚Üê Back to Login</a>
        </div>
      </div>
    </div>
  </div>

  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="navbar-logo">
      <span class="icon">üõ°Ô∏è</span>
      <span class="navbar-logo-text">
        <div class="navbar-logo-title">SafeLink</div>
        <div class="navbar-logo-sub">Digital Defense Hub</div>
      </span>
    </div>
    <button class="hamburger" aria-label="Menu">&#9776;</button>
    <div class="navbar-links">
      <button class="close-btn" aria-label="Close">&times;</button>
      <a href="Home.html">Home</a>
      <a href="Safetytips.html">Safety Tips</a>
      <a href="Quiz.html" class="active">Quiz</a>
      <a href="Aboutus.html">About Us</a>
      <a href="Contactus.html">Contact</a>
      <span class="navbar-auth">
        <button id="authBtn" onclick="handleLogout()">üë§ Logout</button>
      </span>
    </div>
  </nav>

  <!-- QUIZ HERO -->
  <section class="quiz-hero">
    <h1>üéØ Cybersecurity Quiz</h1>
    <p>Test your knowledge and learn how to protect yourself from digital threats</p>
  </section>

  <!-- QUIZ CONTAINER -->
  <div class="quiz-container">
    <!-- Q1 -->
    <div class="quiz-card active" id="q1">
      <div class="question-number">Question 1 of 5</div>
      <div class="question-text">What is phishing?</div>
      <div class="options">
        <div class="option" data-correct="false">A type of computer virus</div>
        <div class="option" data-correct="true">A fraudulent attempt to obtain sensitive information by disguising as a trustworthy entity</div>
        <div class="option" data-correct="false">A method to speed up internet connection</div>
        <div class="option" data-correct="false">A programming language</div>
      </div>
      <div class="quiz-buttons">
        <button class="quiz-btn btn-prev" onclick="prevQuestion()" disabled>‚Üê Previous</button>
        <button class="quiz-btn btn-next" onclick="nextQuestion()">Next ‚Üí</button>
      </div>
    </div>

    <!-- Q2 -->
    <div class="quiz-card" id="q2">
      <div class="question-number">Question 2 of 5</div>
      <div class="question-text">Which of these is a strong password?</div>
      <div class="options">
        <div class="option" data-correct="false">password123</div>
        <div class="option" data-correct="false">myname2024</div>
        <div class="option" data-correct="true">P@ssw0rd!2024#Xy9</div>
        <div class="option" data-correct="false">12345678</div>
      </div>
      <div class="quiz-buttons">
        <button class="quiz-btn btn-prev" onclick="prevQuestion()">‚Üê Previous</button>
        <button class="quiz-btn btn-next" onclick="nextQuestion()">Next ‚Üí</button>
      </div>
    </div>

    <!-- Q3 -->
    <div class="quiz-card" id="q3">
      <div class="question-number">Question 3 of 5</div>
      <div class="question-text">What does "HTTPS" stand for in a website URL?</div>
      <div class="options">
        <div class="option" data-correct="false">High Text Transfer Protocol Standard</div>
        <div class="option" data-correct="true">HyperText Transfer Protocol Secure</div>
        <div class="option" data-correct="false">Hyper Transfer Text Protocol System</div>
        <div class="option" data-correct="false">Home Tool Transfer Protocol Secure</div>
      </div>
      <div class="quiz-buttons">
        <button class="quiz-btn btn-prev" onclick="prevQuestion()">‚Üê Previous</button>
        <button class="quiz-btn btn-next" onclick="nextQuestion()">Next ‚Üí</button>
      </div>
    </div>

    <!-- Q4 -->
    <div class="quiz-card" id="q4">
      <div class="question-number">Question 4 of 5</div>
      <div class="question-text">Which of the following is the safest way to share sensitive information?</div>
      <div class="options">
        <div class="option" data-correct="false">Via email without encryption</div>
        <div class="option" data-correct="false">Through public social media messages</div>
        <div class="option" data-correct="true">Using end-to-end encrypted messaging apps</div>
        <div class="option" data-correct="false">Posting on a private blog</div>
      </div>
      <div class="quiz-buttons">
        <button class="quiz-btn btn-prev" onclick="prevQuestion()">‚Üê Previous</button>
        <button class="quiz-btn btn-next" onclick="nextQuestion()">Next ‚Üí</button>
      </div>
    </div>

    <!-- Q5 -->
    <div class="quiz-card" id="q5">
      <div class="question-number">Question 5 of 5</div>
      <div class="question-text">What should you do if you receive a suspicious email asking for your bank details?</div>
      <div class="options">
        <div class="option" data-correct="false">Reply with your details immediately</div>
        <div class="option" data-correct="true">Delete it and report it as phishing/spam</div>
        <div class="option" data-correct="false">Click on links to verify if it's legitimate</div>
        <div class="option" data-correct="false">Forward it to all your contacts</div>
      </div>
      <div class="quiz-buttons">
        <button class="quiz-btn btn-prev" onclick="prevQuestion()">‚Üê Previous</button>
        <button class="quiz-btn btn-next" onclick="nextQuestion()">Submit Quiz</button>
      </div>
    </div>

    <!-- RESULT CARD -->
    <div class="result-card">
      <h2>üéâ Quiz Completed!</h2>
      <div class="score-display" id="score">0/5</div>
      <p id="result-message">Great job on completing the quiz!</p>
      <div class="result-buttons">
        <button onclick="restartQuiz()">üîÑ Retake Quiz</button>
        <button onclick="window.location.href='Home.html'">üè† Go Home</button>
      </div>
    </div>
  </div>

  <!-- JAVASCRIPT -->
  <script>
const hamburger = document.querySelector('.hamburger');
const navbarLinks = document.querySelector('.navbar-links');
const closeBtn = document.querySelector('.close-btn');

// ADD these lines:
hamburger.onclick = function() {
  navbarLinks.classList.add('open');
  hamburger.style.display = 'none'; // Hides hamburger
};
closeBtn.onclick = function() {
  navbarLinks.classList.remove('open');
  hamburger.style.display = 'block'; // Shows hamburger again
};

// Also update this in your resize event listener:
window.addEventListener('resize', () => {
  if(window.innerWidth > 900) {
    navbarLinks.classList.remove('open');
    hamburger.style.display = 'none'; // Hide hamburger on desktop
  } else {
    hamburger.style.display = 'block'; // Show hamburger on mobile
  }
});







  // USER DATA MANAGEMENT
  function getUsers() {
    return JSON.parse(localStorage.getItem('safelinkUsers')) || [];
  }
  function saveUsers(users) {
    localStorage.setItem('safelinkUsers', JSON.stringify(users));
  }
  function getCurrentUser() {
    return localStorage.getItem('currentUser');
  }
  function setCurrentUser(username) {
    localStorage.setItem('currentUser', username);
  }
  function clearCurrentUser() {
    localStorage.removeItem('currentUser');
  }
  
  // AUTH MODAL SWITCH
  function showError(message) {
    const errorMsg = document.getElementById('errorMsg');
    errorMsg.textContent = message;
    errorMsg.style.display = 'block';
    document.getElementById('successMsg').style.display = 'none';
  }
  function showSuccess(message) {
    const successMsg = document.getElementById('successMsg');
    successMsg.textContent = message;
    successMsg.style.display = 'block';
    document.getElementById('errorMsg').style.display = 'none';
  }
  function clearMessages() {
    document.getElementById('errorMsg').style.display = 'none';
    document.getElementById('successMsg').style.display = 'none';
  }
  function showLogin() {
    clearMessages();
    document.querySelectorAll('.form-section').forEach(f => f.classList.remove('active'));
    document.getElementById('loginForm').classList.add('active');
  }
  function showSignup() {
    clearMessages();
    document.querySelectorAll('.form-section').forEach(f => f.classList.remove('active'));
    document.getElementById('signupForm').classList.add('active');
  }
  function showForgotPassword() {
    clearMessages();
    document.querySelectorAll('.form-section').forEach(f => f.classList.remove('active'));
    document.getElementById('forgotForm').classList.add('active');
  }

  // LOGIN HANDLER
  function handleLogin() {
    const username = document.getElementById('loginUsername').value.trim();
    const password = document.getElementById('loginPassword').value;
    if (!username || !password) { showError('Please enter both username and password'); return; }
    const users = getUsers();
    const user = users.find(u => u.username === username && u.password === password);
    if (user) {
      setCurrentUser(username);
      document.getElementById('authOverlay').classList.remove('active');
      updateAuthUI();
    } else { showError('Invalid username or password'); }
  }

  function handleSignup() {
    const username = document.getElementById('signupUsername').value.trim();
    const email = document.getElementById('signupEmail').value.trim();
    const password = document.getElementById('signupPassword').value;
    const confirmPassword = document.getElementById('signupConfirmPassword').value;
    if (!username || !email || !password || !confirmPassword) { showError('Please fill in all fields'); return; }
    if (username.length < 3) { showError('Username must be at least 3 characters'); return; }
    if (password.length < 6) { showError('Password must be at least 6 characters'); return; }
    if (password !== confirmPassword) { showError('Passwords do not match'); return; }
    const users = getUsers();
    if (users.find(u => u.username === username)) { showError('Username already exists'); return; }
    if (users.find(u => u.email === email)) { showError('Email already registered'); return; }
    users.push({ username, email, password });
    saveUsers(users);
    showSuccess('Account created successfully! Please login.');
    setTimeout(() => { showLogin(); document.getElementById('loginUsername').value = username; }, 1500);
  }

  function handleForgotPassword() {
    const username = document.getElementById('forgotUsername').value.trim();
    const email = document.getElementById('forgotEmail').value.trim();
    const newPassword = document.getElementById('newPassword').value;
    const confirmNewPassword = document.getElementById('confirmNewPassword').value;
    if (!username || !email || !newPassword || !confirmNewPassword) { showError('Please fill in all fields'); return; }
    if (newPassword.length < 6) { showError('Password must be at least 6 characters'); return; }
    if (newPassword !== confirmNewPassword) { showError('Passwords do not match'); return; }
    const users = getUsers();
    const userIndex = users.findIndex(u => u.username === username && u.email === email);
    if (userIndex === -1) { showError('No account found with these credentials'); return; }
    users[userIndex].password = newPassword;
    saveUsers(users);
    showSuccess('Password reset successful! Please login with your new password.');
    setTimeout(() => { showLogin(); document.getElementById('loginUsername').value = username; }, 1500);
  }

  function handleLogout() {
    if (confirm('Are you sure you want to logout?')) {
      clearCurrentUser();
      alert('üëã Logged out successfully');
      window.location.reload();
    }
  }

  // ENTER KEY SUPPORT
  document.getElementById('loginPassword').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') handleLogin();
  });
  document.getElementById('signupConfirmPassword').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') handleSignup();
  });
  document.getElementById('confirmNewPassword').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') handleForgotPassword();
  });

  // NAVBAR / AUTH STATE UI - always use localStorage
  function updateAuthUI() {
    const username = getCurrentUser();
    const authBtn = document.getElementById('authBtn');
    if (!authBtn) return;
    if (username) {
      authBtn.textContent = 'üë§ Logout';
      authBtn.onclick = handleLogout;
      document.getElementById('authOverlay').classList.remove('active');
    } else {
      authBtn.textContent = 'Login / Sign Up';
      authBtn.onclick = function() {
        document.getElementById('authOverlay').classList.add('active');
        showLogin();
      };
      document.getElementById('authOverlay').classList.add('active');
      showLogin();
    }
  }

  // AUTH OVERLAY ENFORCEMENT
  window.addEventListener('DOMContentLoaded', function() {
    updateAuthUI();
  });
  window.addEventListener('storage', updateAuthUI);

  // === QUIZ LOGIC (unchanged from your code) ===
  let currentQuestion = 1;
  const totalQuestions = 5;
  let userAnswers = {};

  document.querySelectorAll('.option').forEach(option => {
    option.addEventListener('click', function() {
      const parent = this.parentElement;
      parent.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
      this.classList.add('selected');
      userAnswers[currentQuestion] = this.getAttribute('data-correct') === 'true';
    });
  });

  function nextQuestion() {
    if (currentQuestion < totalQuestions) {
      document.getElementById('q' + currentQuestion).classList.remove('active');
      currentQuestion++;
      document.getElementById('q' + currentQuestion).classList.add('active');
      const prevBtn = document.querySelector('#q' + currentQuestion + ' .btn-prev');
      prevBtn.disabled = false;
    } else {
      submitQuiz();
    }
  }
  function prevQuestion() {
    if (currentQuestion > 1) {
      document.getElementById('q' + currentQuestion).classList.remove('active');
      currentQuestion--;
      document.getElementById('q' + currentQuestion).classList.add('active');
      if (currentQuestion === 1) {
        const prevBtn = document.querySelector('#q1 .btn-prev');
        prevBtn.disabled = true;
      }
    }
  }
  function submitQuiz() {
    let score = 0;
    for (let i = 1; i <= totalQuestions; i++) {
      if (userAnswers[i] === true) score++;
    }
    document.querySelectorAll('.quiz-card').forEach(card => card.style.display = 'none');
    const resultCard = document.querySelector('.result-card');
    resultCard.classList.add('active');
    document.getElementById('score').textContent = score + '/' + totalQuestions;
    const msg = document.getElementById('result-message');
    if (score === 5) {
      msg.textContent = 'üåü Perfect score! You\'re a cybersecurity expert!';
    } else if (score >= 4) {
      msg.textContent = 'üëè Excellent work! You have a strong understanding of cybersecurity.';
    } else if (score >= 3) {
      msg.textContent = 'üëç Good job! Keep learning to improve your security knowledge.';
    } else {
      msg.textContent = 'üìö Keep practicing! Review the lessons and try again.';
    }
    // Save score to user's history (optional)
    const currentUser = getCurrentUser();
    if (currentUser) {
      const users = getUsers();
      const userIndex = users.findIndex(u => u.username === currentUser);
      if (userIndex !== -1) {
        if (!users[userIndex].scores) users[userIndex].scores = [];
        users[userIndex].scores.push({
          score: score,
          total: totalQuestions,
          date: new Date().toISOString()
        });
        saveUsers(users);
      }
    }
  }
  function restartQuiz() {
    currentQuestion = 1;
    userAnswers = {};
    document.querySelectorAll('.quiz-card').forEach(card => {
      card.style.display = '';
      card.classList.remove('active');
      card.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
    });
    document.querySelector('.result-card').classList.remove('active');
    document.getElementById('q1').classList.add('active');
    document.querySelector('#q1 .btn-prev').disabled = true;
  }
</script>

</body>
</html>

